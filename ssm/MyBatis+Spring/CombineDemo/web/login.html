<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="static/css/login.css">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

</head>
<body>
<div id="app">
    <el-card id="login" class="box-card">
        <div slot="header" style="font-size: 25px">
            <span>用户登录</span>
        </div>
        <el-form id="form" size="medium" ref="form" :model="form" label-width="80px">
            <el-form-item label="用户名"
                          :rules="[{ required: true, message: '用户名不能为空'}]">
                <el-input v-model="form.username"
                          auto-complete="off"></el-input>
            </el-form-item>
            <el-form-item label="密码"
                          :rules="[{ required: true, message: '密码不能为空'}]">
                <el-input type="password"
                          v-model="form.password"
                          auto-complete="off"></el-input>
            </el-form-item>
            <el-form-item label="记住我">
                <el-switch v-model="form.remember"></el-switch>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @click="onSubmit">立即创建</el-button>
                <el-button>取消</el-button>
            </el-form-item>
        </el-form>
    </el-card>
</div>
</body>
<!-- 先引入 Vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jutils-src"></script>

<script>
    new Vue({

        el:'#app',

        data:{
            form: {
                username: '',
                password: '',
                remember: false,
            }
        },
        methods: {
            onSubmit() {
                axios({
                    method:"post",
                    url:"/login.do",
                    headers:{
                        'Content-type': 'application/x-www-form-urlencoded'
                    },
                    params:{
                        username: this.form.username,
                        password: this.form.password,
                        remember: this.form.remember
                    },
                }).then((respone)=>{
                    if(respone.data.success){
                        window.location.href="index.html";
                        this.form = {};
                    }else{
                        this.$message({
                            message: respone.data.message,
                            type: 'warning',
                            duration: 6000
                        })
                    }
                }).catch(error=>{
                    this.$message({
                        type: 'error',
                        message: '网络无连接'
                    })
                })
            }
        }
    })
</script>

</html>